{% extends "components/layout.html" %}

{% block title %}On-Call Schedule - LinkedEye-FinSpot{% endblock %}

{% block content %}
<div class="page-header">
    <div class="page-header-left">
        <h1 class="page-title">On-Call Schedule</h1>
        <p class="page-subtitle">Manage on-call rotations and escalations</p>
    </div>
    <div class="page-header-right">
        <button class="btn btn-secondary" onclick="showCalendar()">
            <i class="fas fa-calendar-alt"></i> Calendar View
        </button>
        <button class="btn btn-primary" onclick="addSchedule()">
            <i class="fas fa-plus"></i> Add Schedule
        </button>
    </div>
</div>

<div class="stats-grid stats-grid-3">
    <div class="stat-card">
        <div class="stat-icon stat-icon-green">
            <i class="fas fa-user-clock"></i>
        </div>
        <div class="stat-content">
            <span class="stat-value" id="on-call-now">-</span>
            <span class="stat-label">Currently On-Call</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon stat-icon-blue">
            <i class="fas fa-layer-group"></i>
        </div>
        <div class="stat-content">
            <span class="stat-value">{{ teams|length }}</span>
            <span class="stat-label">Teams</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon stat-icon-yellow">
            <i class="fas fa-bell"></i>
        </div>
        <div class="stat-content">
            <span class="stat-value" id="escalations">-</span>
            <span class="stat-label">Active Escalations</span>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title"><i class="fas fa-users-cog"></i> Team Schedules</h3>
    </div>
    <div class="card-body">
        {% for team in teams %}
        <div class="schedule-card">
            <div class="schedule-header">
                <h4>{{ team.name }}</h4>
                <span class="badge badge-info">{{ team.members|length if team.members else 0 }} members</span>
            </div>
            <div class="schedule-body">
                <p class="text-muted">{{ team.description or 'No description' }}</p>
                <div class="on-call-info">
                    <span class="label">Primary On-Call:</span>
                    <span class="value">Not configured</span>
                </div>
            </div>
        </div>
        {% else %}
        <div class="empty-state">
            <i class="fas fa-calendar-times"></i>
            <h4>No teams configured</h4>
            <p>Create teams and set up on-call schedules</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.schedule-card {
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    padding: 1rem;
    margin-bottom: 1rem;
}
.schedule-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}
.schedule-header h4 {
    margin: 0;
}
.on-call-info {
    margin-top: 0.5rem;
}
.on-call-info .label {
    font-weight: 500;
    color: var(--gray-600);
}
</style>
{% endblock %}
